{"version":3,"sources":["../../webpack/universalModuleDefinition","../../webpack/bootstrap","Component.js","Recursion.js","Engine.js","Node.js","View/Drag.js","View/Area.js","View/Connection.js","View/Socket.js","View/Element.js","View/Node.js","View/index.js","Editor.js","index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Component","Recursion","nodes","targetNode","filter","node","outputs","length","reduce","acc","Array","isArray","indexOf","id","inputNodes","array2","inters","inter","findSelf","extractInputNode","Engine","version","component","Error","engine","components","data","recurrentNode","detect","input","undefined","output","type","worker","_","outputNodeIds","idx","nextInput","nodeId","nextNode","find","forwardProcess","startId","json","validate","Node","branch","push","result","map","out","Drag","element","onTranslate","onStart","hotkey","pointerStart","addEventListener","down","keypress","window","keyDown","keyUp","move","up","event","code","style","cursor","pointerType","stopPropagation","pageX","pageY","preventDefault","y","delta","zoom","getBoundingClientRect","width","offsetWidth","Area","container","document","createElement","transformOrigin","background","className","appendChild","_drag","transform","x","z","update","_startPosition","dx","dy","translate","tf","removeChild","Connection","view","outputSocket","inputSocket","position","zIndex","pointerEvents","render","getPosition","x1","y1","getPoints","x2","y2","dx1","dy1","dx2","dy2","path","querySelector","renderPath","setAttribute","svg","createElementNS","classes","nodeView","classList","add","area","Socket","el","center","offsetHeight","offsetLeft","offsetTop","Element","socket","content","sockets","addSocket","e","selectNode","params","Math","floor","rerenderNode","console","log","View","click","connection","selected","NodeView","accumulate","from","to","fromNode","toNode","fromSocket","toSocket","keys","forEach","collision","contains","target","Editor","rand","random","toString","substr","addNode","builder","addConnection","addOutput","toJSON"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"FungsiMaju\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"FungsiMaju\"] = factory();\n\telse\n\t\troot[\"FungsiMaju\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","class Component {\n  name = null;\n  engine = null;\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nexport default Component;","/* \n * Deteksi Pengulangan\n * Ref: https://github.com/retejs/rete/blob/master/src/engine/recursion.ts\n */\n\nconst intersect = (array1, array2) => {\n  return array1.filter(value => array2.indexOf(value) !== -1);\n}\n\nclass Recursion {\n  constructor(nodes) {\n    this.nodes = nodes;\n  }\n\n  extractInputNode(targetNode) {\n    return this.nodes.filter(node => {\n      if (node.outputs.length < 1) return false;\n      return node.outputs\n        .reduce((acc, n) => {\n          if (Array.isArray(n)) return [...acc, ...n]\n          return acc;\n        })\n        .indexOf(targetNode.id) !== -1;\n    });\n  }\n\n  findSelf(nodes, inputNodes) {\n    const inters = intersect(nodes, inputNodes);\n\n    if (inters.length)\n      return inters[0];\n\n    for (let node of inputNodes) {\n      let l = [node, ...nodes];\n      let inter = this.findSelf(l, this.extractInputNode(node));\n      if (inter)\n        return inter;\n    }\n\n    return null;\n  }\n\n  detect() {\n\n    let nodes = this.nodes;\n\n    for (let node of nodes) {\n      const inters = this.findSelf([node], this.extractInputNode(node));\n\n      if (inters)\n        return inters;\n    }\n\n    return null;\n  }\n}\n\nexport default Recursion;","import Component from './Component';\nimport Recursion from './Recursion';\n\nclass Engine {\n  version = null;\n  components = {};\n  nodes = null;\n\n  constructor(version) {\n    this.version = version;\n  }\n\n  register(component) {\n    if (!(component instanceof Component)) throw new Error(\"Not Valid Component\");\n    if (!component.name) throw new Error(`Property name is \\`${component.name}\\``);\n\n    component.engine = this;\n\n    this.components[component.name] = component;\n\n    return this;\n  }\n\n  validate(data) {\n    if (typeof data !== \"object\") return false;\n    if (data.version !== this.version) throw new Error(\"Version not compatible\");\n    if (!Array.isArray(data.nodes)) return false;\n\n    const recursion = new Recursion(data.nodes);\n    const recurrentNode = recursion.detect();\n\n    if (recurrentNode)\n      throw new Error(`Recursion detected at \\`${recurrentNode.id}\\``)\n\n    return true;\n  }\n\n  forwardProcess(node, input) {\n    if (input === undefined) return false;\n    const component = this.components[node.type];\n    let output = component.worker(node, input);\n\n    return node.outputs.reduce((_, outputNodeIds, idx) => {\n      let nextInput = output;\n      if (Array.isArray(output)) nextInput = output[idx];\n      return outputNodeIds.reduce((_, nodeId) => {\n        const nextNode = this.nodes.find(node => node.id === nodeId);\n        return this.forwardProcess(nextNode, nextInput);\n      }, true);\n    }, true);\n  }\n\n  process(input, startId, json = null) {\n    if (!json) json = { version: this.version, nodes: this.nodes };\n\n    if (this.validate(json))\n      this.nodes = [...json.nodes];\n    else\n      return false;\n\n    let node = this.nodes.find(node => node.id === startId);\n    this.forwardProcess(node, input);\n\n    return true;\n  }\n}\n\nexport default Engine;","class Node {\n  constructor(id, type, outputs = []) {\n    this.id = id;\n    this.type = type;\n    this.outputs = outputs;\n  }\n\n  addOutput(branch, id) {\n\n    if (!this.outputs[branch])\n      this.outputs[branch] = [];\n\n    if (id)\n      this.outputs[branch].push(id);\n\n    return this;\n  }\n\n  removeOutput(id, branch = null) {\n    let result = [];\n\n    if (branch) result = this.outputs[branch].filter(output => output !== id);\n    else result = this.outputs.map(output => output.filter(out => out !== id));\n\n    this.outputs = result;\n\n    return this;\n  }\n\n  toJSON() {\n    const data = { id: this.id, type: this.type, outputs: this.outputs };\n    return data;\n  }\n}\n\nexport default Node;","class Drag {\n  constructor(element, onTranslate, onStart, hotkey = null) {\n    this.pointerStart = null;\n    this.onTranslate = onTranslate;\n    this.onStart = onStart;\n\n    this.element = element;\n    this.element.addEventListener(\"pointerdown\", this.down.bind(this));\n\n    this.keypress = null;\n\n    if (hotkey) {\n      this.keypress = false;\n      window.addEventListener(\"keydown\", this.keyDown.bind(this, hotkey));\n      window.addEventListener(\"keyup\", this.keyUp.bind(this, hotkey));\n    }\n\n    window.addEventListener(\"pointermove\", this.move.bind(this));\n    window.addEventListener(\"pointerup\", this.up.bind(this));\n  }\n\n  keyDown(hotkey, event) {\n    if (event.code === hotkey || event.key === hotkey) {\n      this.element.style.cursor = \"grab\";\n      this.keypress = true;\n    }\n  }\n  keyUp(hotkey, event) {\n    if (event.code === hotkey || event.key === hotkey) {\n      this.element.style.cursor = \"crosshair\";\n      this.keypress = false;\n    }\n  }\n\n  down(event) {\n    if (this.keypress !== null && this.keypress === false) return;\n    if (event.pointerType === \"mouse\")\n      event.stopPropagation();\n    this.pointerStart = [event.pageX, event.pageY];\n    this.onStart(event);\n  }\n\n  move(event) {\n    if (!this.pointerStart) return;\n    event.preventDefault();\n\n    let [x, y] = [event.pageX, event.pageY];\n\n    let delta = [x - this.pointerStart[0], y - this.pointerStart[1]];\n\n    let zoom = this.element.getBoundingClientRect().width / this.element.offsetWidth;\n\n    this.onTranslate(delta[0] / zoom, delta[1] / zoom, event);\n  }\n\n  up(event) {\n    if (!this.pointerStart) return;\n    this.pointerStart = null;\n  }\n}\n\nexport default Drag;","import '../css/View.css';\nimport Drag from \"./Drag\";\n\nclass Area {\n  constructor(container) {\n    this.element = document.createElement(\"div\");\n    this.container = container;\n\n    this.element.style.transformOrigin = \"0 0\";\n\n    this.background = document.createElement(\"div\");\n    this.background.className = \"node-editor-background\";\n\n    this.element.appendChild(this.background);\n\n    this._drag = new Drag(\n      this.container,\n      this.onTranslate.bind(this),\n      this.onStart.bind(this),\n      \"Space\"\n    );\n\n    this.transform = {\n      x: 0, y: 0, z: 1\n    }\n\n    this.update();\n  }\n\n  onStart() {\n    this._startPosition = { ...this.transform };\n  }\n\n  onTranslate(dx, dy) {\n    // if (this._zoom.translating) return; // lock translation while zoom on multitouch\n    if (this._startPosition) this.translate(this._startPosition.x + dx, this._startPosition.y + dy);\n  }\n\n  update() {\n    const tf = this.transform;\n    this.element.style.transform = `translate(${tf.x}px, ${tf.y}px) scale(${tf.z})`;\n  }\n\n  translate(x, y) {\n    this.transform.x = x\n    this.transform.y = y\n    this.update();\n  }\n\n  appendChild(element) {\n    this.element.appendChild(element);\n  }\n  removeChild(element) {\n    this.element.removeChild(element);\n  }\n}\n\nexport default Area;","class Connection {\n  constructor(view, outputSocket, inputSocket) {\n    this.view = view;\n    this.inputSocket = inputSocket;\n    this.outputSocket = outputSocket;\n\n    this.element = document.createElement(\"div\");\n    this.element.style.position = \"absolute\";\n    this.element.style.zIndex = 2;\n    this.element.style.pointerEvents = \"none\";\n\n    this.render();\n  }\n\n  getPoints() {\n    const [x1, y1] = this.outputSocket.getPosition();\n    const [x2, y2] = this.inputSocket.getPosition();\n    return [x1, y1, x2, y2];\n  }\n\n  renderPath() {\n    const [x1, y1, x2, y2] = this.getPoints();\n    let dx1 = ((x1 + x2) / 2);\n    dx1 = dx1 - (dx1 - x1);\n    const dy1 = (y1 + y2) / 2;\n    let dx2 = (x1 + x2) / 2;\n    dx2 = dx2 + (dx2 - x1);\n    const dy2 = (y1 + y2) / 2;\n    return `M ${x1} ${y1} C ${dx1} ${dy1} ${dx2} ${dy2} ${x2} ${y2}`;\n  }\n\n  update() {\n    const path = this.element.querySelector(\".connection path.main-path\");\n\n    if (!path) throw new Error(\"Path of connection was broken\");\n\n    const d = this.renderPath();\n\n    path.setAttribute(\"d\", d);\n  }\n\n  render() {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n    const classes = [\n      `input-${this.inputSocket.nodeView.node.id}`,\n      `output-${this.outputSocket.nodeView.node.id}`\n    ]\n\n    svg.classList.add(\"connection\", ...classes);\n    path.classList.add(\"main-path\");\n\n    svg.appendChild(path);\n    this.element.appendChild(svg);\n    this.view.area.appendChild(this.element);\n\n    this.update();\n  }\n}\n\nexport default Connection;","class Socket {\n  constructor(element, type, nodeView) {\n    this.element = element;\n    this.type = type;\n    this.nodeView = nodeView;\n  }\n  getPosition() {\n    const el = this.element;\n    const { node } = this.nodeView;\n    const center = {\n      x: el.offsetWidth / 2,\n      y: el.offsetHeight / 2,\n    }\n    return [\n      node.position[0] + el.offsetLeft + center.x,\n      node.position[1] + el.offsetTop + center.y\n    ]\n  }\n}\n\nexport default Socket;","class Element {\n  input = {};\n  output = {};\n\n  constructor(nodeView) {\n    this.nodeView = nodeView;\n    this.element = document.createElement(\"div\");\n  }\n\n  addSocket(type, name) {\n    const socket = document.createElement(\"div\");\n    socket.setAttribute(\"class\", `node-socket node-socket-${name}`);\n\n    switch(type) {\n      case \"input\":\n        this.input[name] = socket;\n        break;\n      case \"output\":\n        this.output[name] = socket;\n        break;\n      default: break;\n    }\n    \n    return socket;\n  }\n\n  render() {\n    this.element.setAttribute(\"class\", \"node\");\n\n    const content = document.createElement(\"div\");\n\n    const input = document.createElement(\"div\");\n    const output = document.createElement(\"div\");\n    const socket = document.createElement(\"div\");\n\n    input.setAttribute(\"class\", \"node-input\");\n    output.setAttribute(\"class\", \"node-output\");\n    socket.setAttribute(\"class\", \"node-socket\");\n\n    this.element.appendChild(content);\n    this.element.appendChild(input);\n    this.element.appendChild(output);\n    input.appendChild(socket);\n    output.appendChild(socket);\n\n    return this.element;\n  }\n}\n\nexport default Element;","import '../css/View.css';\n\nimport Drag from \"./Drag\";\nimport Socket from \"./Socket\";\nimport Element from \"./Element\";\n\nclass Node {\n\n  constructor(node, component, view) {\n    this.view = view;\n    this.node = node;\n\n    this.sockets = {};\n\n    this.component = component;\n    this.container = document.createElement(\"div\");\n    this.container.style.position = \"absolute\";\n\n    this.container.className = \"node-wrapper\";\n\n    this.element = new Element(this);\n\n    this._drag = new Drag(\n      this.container,\n      this.onTranslate.bind(this),\n      this.onStart.bind(this),\n    );\n\n    this.update();\n    this.render();\n  }\n\n  addSocket(type, key) {\n    const socket = this.element.addSocket(type, key);\n    this.sockets[`${type}-${key}`] = new Socket(socket, type, this);\n    return this;\n  }\n\n  onStart(e) {\n    this.view.selectNode(this.node);\n    this._startPosition = [...this.node.position];\n  }\n\n  onTranslate(dx, dy) {\n    const x = this._startPosition[0] + dx;\n    const y = this._startPosition[1] + dy;\n    this.translate(x, y);\n  }\n\n  onDrag(dx, dy) {\n    const x = this._startPosition[0] + dx;\n    const y = this._startPosition[1] + dy;\n    this.translate(x, y);\n  }\n\n  translate(x, y) {\n    const node = this.node;\n    const params = { node, x, y };\n    const grid = 5;\n\n    node.position[0] = Math.floor(params.x / grid) * grid;\n    node.position[1] = Math.floor(params.y / grid) * grid;\n\n    this.update();\n  }\n\n\n  update() {\n    let [x, y] = [0, 0];\n    if (this.node.position) [x, y] = this.node.position;\n    this.container.style.transform = `translate(${x}px, ${y}px)`;\n    this.node.position = [x, y];\n\n    this.view.rerenderNode();\n  }\n\n  render() {\n    console.log(this.element);\n  }\n}\n\nexport default Node;","import '../css/View.css';\nimport Area from './Area';\nimport Connection from './Connection';\nimport NodeView from './Node';\n\nclass View {\n  constructor(container, components) {\n    this.container = container;\n    this.components = components;\n\n    this.container.classList.add(\"node-editor-container\");\n\n    this.container.addEventListener(\"click\", this.click.bind(this));\n\n    this.area = new Area(this.container);\n    this.container.appendChild(this.area.element);\n\n    this.connection = {};\n    this.selected = {};\n    this.nodes = {};\n  }\n\n  addNode(node) {\n    const component = this.components[node.type];\n\n    if (!component) throw new Error(`Component ${node.name} not found`);\n\n    const nodeView = new NodeView(node, component, this);\n\n    this.nodes[node.id] = nodeView;\n    this.area.appendChild(nodeView.container);\n    \n    return nodeView;\n  }\n\n  selectNode(node, accumulate) {\n    if (node && !this.nodes[node.id])\n      throw new Error(\"Node not exist in list\");\n\n    if (!accumulate) this.selected = {};\n\n    if (this.selected[node.id])\n      delete this.selected[node.id];\n    else\n      this.selected[node.id] = node;\n\n    this.rerenderNode();\n  }\n\n  addConnection(from, branch, to) {\n    const fromNode = this.nodes[from.id];\n    const toNode = this.nodes[to.id];\n    const fromSocket = fromNode.sockets[`output-${branch}`];\n    const toSocket = toNode.sockets[`input-0`];\n\n    this.connection[`${from.id}-${to.id}`] = new Connection(this, fromSocket, toSocket);\n  }\n\n  rerenderNode() {\n    Object.keys(this.nodes).forEach((key) => {\n      this.nodes[key].render();\n    });\n    Object.keys(this.connection).forEach((key) => {\n      this.connection[key].update();\n    })\n  }\n\n  click(event) {\n    let collision = false;\n    Object.keys(this.nodes).forEach((key) => {\n      if (this.nodes[key].element.contains(event.target)) collision = true;\n    });\n    if (!collision) {\n      this.selected = {};\n      this.rerenderNode();\n    }\n  }\n}\n\nexport default View;","import Engine from \"./Engine\";\nimport Node from \"./Node\";\nimport View from \"./View\";\n\nclass Editor extends Engine {\n  view = null;\n\n  static generateId() {\n    const rand = Math.random().toString(36);\n    return `${rand.substr(2, 4)}_${rand.substr(4, 4)}`;\n  };\n\n  constructor(version, container) {\n    super(version);\n    this.nodes = [];\n\n    if (container) this.view = new View(container, this.components);\n  }\n\n  addNode(node) {\n    if (!node instanceof Node) return node;\n\n    if (!this.components.hasOwnProperty(node.type))\n      throw new Error(`Component ${node.type} not registered`);\n\n    if (this.view) {\n      const nodeView = this.view.addNode(node);\n      this.components[node.type].builder(nodeView);\n    }\n\n    this.nodes.push(node);\n\n    return node;\n  }\n\n  removeNode(id) {\n    return this.nodes.filter(node => node.id !== id);\n  }\n\n  connect(from, branch, to) {\n    const fromNode = this.nodes.find(node => node.id === from.id);\n    if (!fromNode) throw new Error(`Node ${from.id} not found`);\n\n    const toNode = this.nodes.find(node => node.id === to.id);\n    if (!toNode) throw new Error(`Node ${to.id} not found`);\n\n    if (this.view) this.view.addConnection(fromNode, branch, toNode);\n\n    fromNode.addOutput(branch, toNode.id);\n\n    return this;\n  }\n\n  toJSON() {\n    const data = {\n      version: this.version,\n      nodes: this.nodes.map((node) => node.toJSON())\n    };\n    return data;\n  }\n}\n\nexport default Editor;","import Component from \"./Component\";\nimport Editor from \"./Editor\";\nimport Engine from \"./Engine\";\nimport Node from \"./Node\";\nimport Recursion from \"./Recursion\";\n\nimport View from \"./View\";\nimport Area from \"./View/Area\";\nimport Connection from \"./View/Connection\";\nimport Drag from \"./View/Drag\";\nimport Element from \"./View/Element\";\nimport NodeView from \"./View/Node\";\nimport Socket from \"./View/Socket\";\n\nexport { default as Component } from \"./Component\";\nexport { default as Editor } from \"./Editor\";\nexport { default as Engine } from \"./Engine\";\nexport { default as Node } from \"./Node\";\nexport { default as Recursion } from \"./Recursion\";\n\nexport { default as View } from \"./View\";\nexport { default as Area } from \"./View/Area\";\nexport { default as Connection } from \"./View/Connection\";\nexport { default as Drag } from \"./View/Drag\";\nexport { default as Element } from \"./View/Element\";\nexport { default as NodeView } from \"./View/Node\";\nexport { default as Socket } from \"./View/Socket\";\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default {\n  Component,\n  Editor,\n  Engine,\n  Node,\n  Recursion,\n\n  View,\n  Area,\n  Connection,\n  Drag,\n  NodeView,\n  Element,\n  Socket,\n};"],"sourceRoot":""}